---
/**
 * UAE App Showcase Section â€“ "Go-to app for everyday finances"
 * Displays 4 app screen mock-ups with even spacing to showcase the app features.
 */
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';

// Import phone screen images with explicit typing
import phone1 from '@assets/uae/phone-set/phone1.png';
import phone2 from '@assets/uae/phone-set/phone2.png';
import phone3 from '@assets/uae/phone-set/phone3.png';
import phone4 from '@assets/uae/phone-set/phone4.png';

// Define constants for image sizing
const phoneWidths = [210, 420];
const phoneSizes = '(max-width: 768px) 210px, 210px';

// Create phone objects for easier mapping
interface PhoneDisplay {
  image: ImageMetadata;
  alt: string;
  title: string;
}

// Create an array of phones with their details
const phones: PhoneDisplay[] = [
  {
    image: phone1,
    alt: 'JinglePay app - Add funds screen',
    title: 'Add Funds',
  },
  {
    image: phone2,
    alt: 'JinglePay app - Send Money screen',
    title: 'Send Money',
  },
  {
    image: phone3,
    alt: 'JinglePay app - Request Money screen',
    title: 'Request Money',
  },
  {
    image: phone4,
    alt: 'JinglePay app - Split screen',
    title: 'Split',
  },
];

// Get translations
const { appShowcase } = Astro.locals.translations;

// Helper function to calculate vertical offset for piano tile effect
function getOffsetForIndex(index: number): number {
  // Create a staggered effect
  // First and third phones are higher, second and fourth are lower
  const offsets = [-135, -15, -100, 10];
  return offsets[index] || 0;
}
---

<section class='w-full px-[152px] pt-[132px] pb-[114px]'>
  <div class='flex flex-col gap-[72px] mx-auto max-w-7xl md:flex-row md:items-center md:justify-between'>
    <div class='relative w-full max-w-[568px] translate-y-[-8rem] scale-[1.1] h-[500px] mx-auto md:w-full'>
      <!-- Circular background for phones -->
      <div
        class='absolute scale-[0.9] top-[20rem] left-1/2 -translate-x-1/2 -translate-y-1/2 w-[573.50px] h-[508px] bg-[radial-gradient(ellipse_50.00%_50.00%_at_50.00%_50.00%,_#F3F5F6_0%,_#F3F5F6_100%)] rounded-[254px] z-0'
      >
      </div>

      <!-- Phone screens arrangement - piano tile/staggered layout -->
      <div class='relative z-10 flex items-end justify-center h-full gap-6'>
        <!-- Phones with staggered positioning like piano keys -->
        {
          phones.map((phone, index) => (
            <div
              class='overflow-hidden bg-white shadow-lg rounded-3xl'
              style={`transform: translateY(${getOffsetForIndex(index)}px);`}
            >
              <Image
                src={phone.image}
                alt={phone.alt}
                width={210}
                height={430}
                widths={phoneWidths}
                sizes={phoneSizes}
                loading={index <= 1 ? 'eager' : 'lazy'}
                decoding={index <= 1 ? 'sync' : 'async'}
                quality='max'
              />
            </div>
          ))
        }
      </div>
    </div>

    <div class='text-left max-w-[600px] mx-auto md:w-[45%] px-4 md:px-0'>
      <h2 class='mb-6 text-4xl font-extrabold text-gray-900 font-["Hero_New"]'>
        {appShowcase?.heading || 'The go-to app for everyday finances.'}
      </h2>
      <div class='flex flex-col gap-4'>
        {
          (
            appShowcase?.features || [
              'No minimum balance is required.',
              'Earn +10% profit on savings.',
              'Multiple transactions are available, including utility bill payments, mobile top-ups, and fund transfers.',
            ]
          ).map((feature: string, idx: number) => (
            <p class={`text-xl text-gray-900 font-["DM_Sans"] ${idx === 1 ? 'font-bold' : 'font-normal'}`}>{feature}</p>
          ))
        }
      </div>
    </div>
  </div>
</section>
