---
import Arrow from '@assets/icons/arrow.svg';

// Complete UAE FAQ data from AE_FAQ_SECTIONS in faqConfig.tsx
const faqSections = [
  {
    title: 'About Jingle Pay',
    questions: [
      {
        question: 'What is Jingle Pay?',
        answer:
          'Jingle Pay is a regulated financial services firm offering a mobile first application empowering its customers with a versatile financial account to safely and reliably spend, send, and store money – fee free with no commitments.',
      },
      {
        question: 'Where is Jingle Pay regulated?',
        answer: `<div class="flex flex-col gap-y-3">
          <span>
            Jingle Pay Limited is a company incorporated in the Dubai International Financial Centre (the "DIFC")
            under trade license number CL4904, with registered office at 908 Innovation One, DIFC, Dubai, United Arab
            Emirates, registered as a category 3C Money Services Provider firm with the Dubai Financial Services
            Authority (the "DFSA") (registration number F005329).
          </span>
          <div class="flex flex-col gap-y-2">
            <span>
              Jingle Pay Limited is authorised and licenced by the DFSA to provide the following financial services:
            </span>
            <ul class="flex flex-col pl-6 list-disc gap-y-1">
              <li> Providing or operating a Payment Account;</li>
              <li> Providing Money Transmission;</li>
              <li> Issuing Payment Instruments;</li>
              <li> Issuing Stored Value; and</li>
              <li> Making arrangements for another Person to receive Money Services.</li>
            </ul>
          </div>
        </div>`,
      },
      {
        question: 'Are there any physical locations for Jingle Pay?',
        answer: 'Jingle Pay is a digital first service and therefore no physical branch locations.',
      },
    ],
  },
  {
    title: 'JINGLE PAY ACCOUNT OPENING',
    questions: [
      {
        question: 'Who can open a Jingle Pay Account?',
        answer:
          'Jingle Pay is only available to UAE residents. Customers can register through the mobile application using their smartphone with their Emirates ID.',
      },
      {
        question: 'What are the minimum system requirements for running the JP application?',
        answer: `You can use JP mobile app if your phone meets the following requirements:

• iOS: iOS v14 with and supported iPhone version are iPhone 11 or more supporting NFC tag, Bluetooth, 3g/4g/5g data speed over cellular.
• Android: Android 11 or more with 8 MP front facing and 12 MP rear camera supporting NFC, Bluetooth, 3g/4g/5g data speed over cellular.`,
      },
      {
        question: 'Can I sign up using my passport?',
        answer: 'You can only use your Emirates ID Card to register for a Jingle Pay account.',
      },
      {
        question: 'Is there an age criterion to open a Jingle Pay Account?',
        answer: 'You must be 18 years or more to open an account with Jingle Pay.',
      },
      {
        question: 'What is the difference between Jingle Pay Account and a classic Bank Account?',
        answer:
          "A Bank account would give you interest whereby Jingle Pay Account will hold your funds and is used as a spending account, andwe don't lend out your money. Your money is segregated and only used as per your instructions, whether you want to pay someone or something or send money internationally.",
      },
      {
        question: 'How do I open an account in Jingle Pay?',
        answer: `Download the application from the <a class="cursor-pointer transition-colors hover:text-[#794EFF]" href="https://play.google.com/store/apps/details?id=com.jinglepay" target="_blank">Google Play</a> Store or <a class="cursor-pointer transition-colors hover:text-[#794EFF]" href="https://apps.apple.com/app/jingle-pay/id1493392189" target="_blank">Apple App Store</a> and open an account seamlessly, using your Emirates ID.`,
      },
      {
        question: 'Can I open more than 1 account with Jingle Pay?',
        answer: 'One customer can open only 1 account with Jingle Pay.',
      },
      {
        question: 'I am a dual national; can I open two accounts using each of my country IDs?',
        answer: 'No, one customer can only have 1 account with Jingle Pay.',
      },
      {
        question: 'Can I access my Jingle Pay Account outside UAE?',
        answer: 'Yes, Jingle Pay account can be accessed anywhere, anytime.',
      },
      {
        question: 'Can I transfer ownership of my Jingle Pay account to a family member or a friend?',
        answer:
          'No, but they can register with no commitments fee free account. You can also transfer money to your family member or friends for free.',
      },
      {
        question: 'I am unable to open a Jingle Pay account. What should I do?',
        answer: `Please send us an email at <a class="cursor-pointer hover:text-[#794EFF]" href="mailto:support@jinglepay.com">support@jinglepay.com</a>`,
      },
    ],
  },
  {
    title: 'JINGLE PAY ACCOUNT FEATURES',
    questions: [
      {
        question: 'What are the various services being offered via a Jingle Pay?',
        answer: `Jingle Pay aims to simplify all money services for its customers. Using Jingle Pay, you can:

▪ Top-up your account by linking your bank account or using your Debit Card
▪ Make Peer to Peer Payments, including Split bills with friends, Request money from friends and make instant payments using a mobile number, for free.
▪ Send International Money transfers to a bank account, mobile wallets, card accounts, even cash pick-up at the best available exchange rates, without a fee.`,
      },
      {
        question: 'Can I pay utility bills using my Jingle Pay account?',
        answer:
          'Not yet, but we are continuously evolving and enabling new services to offer you higher convenience, including bill payments, sim card top-ups and more. Stay tuned!',
      },
      {
        question: 'Can I have a Jingle Pay account chequebook?',
        answer: 'We do not offer cheque books.',
      },
      {
        question: 'Can I have a Pay Order made from my Jingle Pay account?',
        answer:
          'Not yet, but Jingle Pay is continuously evolving and enabling new services to offer you higher convenience.',
      },
      {
        question: 'Are there any transaction limits on Jingle Pay account?',
        answer:
          'You can top-up or spend up to AED 3,650 daily. The Jingle Pay account balance is currently limited to AED 18,250 at any point. Please note that limits are defined by the regulatory authorities governing Jingle Pay.',
      },
      {
        question: 'What are the annual fees for using my Jingle Pay account?',
        answer:
          'Jingle Pay is committed to offer fee free accounts with no minimum balance requirement. Although, we do aim to introduce additional features and benefits with higher account categories which may come at a marginal fee.',
      },
      {
        question: 'Will there be any Tax deductions?',
        answer: 'VAT will be deducted wherever applicable, as per governing regulations.',
      },
    ],
  },
  {
    title: 'MONEY TRANSFERS',
    questions: [
      {
        question: 'How do I Top-up my Account?',
        answer:
          'You can either use your local bank debit card and/or linking your bank account. Please visit the deposit page in the app. To view a quick tutorial on how to top-up, click',
      },
      {
        question: 'How do I Transfer Money?',
        answer:
          'Simply click on the Send button on app homepage and select a payment to be made to another jingle pay user or send money internationally. To view a quick tutorial on how to send money, click',
      },
      {
        question: 'How long does it take the beneficiary to receive remittances?',
        answer:
          'It will be instant in most cases but depending on the country and pay-out method the time to receive remittance may take up to 2 working days. You will receive an approximate time when sending money with real time notifications until the funds reach to the destination.',
      },
      {
        question: 'What are the fees and charges for sending and receiving money?',
        answer:
          'There is no fees at the moment, but this is subject to change. Fees and exchange rates are displayed in the mobile app before you confirm the transfer to be made.',
      },
      {
        question: 'How many times can I transfer funds in a day?',
        answer:
          'As many times as you wish but please note that the combined transactions are limited to AED 3,650 per day.',
      },
      {
        question: 'Can I send money from my Jingle Pay account to another Jingle Pay account?',
        answer: 'Yes, you can transfer money to another Jingle Pay user, instantly.',
      },
      {
        question: 'Can the beneficiary also receive cash from a physical location?',
        answer:
          'Yes, we support cash pick up and cash delivery services for our customers in many countries. You will see this option when selecting Cash Pickup option.',
      },
      {
        question: 'Can I send money in a currency in which I do not have an Account for?',
        answer: 'Yes, you can send money internationally.',
      },
      {
        question: "What do I do if the payment is not credited into the receiver's account within the given time?",
        answer: `Reach out to us at <a class="cursor-pointer hover:text-[#794EFF]" href="mailto:support@jinglepay.com">support@jinglepay.com</a> or communicate with us through the in-app chat support and we will update you on the status of your transfer.`,
      },
      {
        question: 'What is the Max time required to credit the beneficiary account?',
        answer:
          'Depends by country and pay out method, as well as local holidays. In most cases, the pay-outs are instant, but you will find the estimated time when making an international money transfer in the application.',
      },
      {
        question: 'How do I know that my International Remittance has been approved or completed?',
        answer: `You will go through a confirmation page in the application which will show the status. To view a quick tutorial on how to send money internationally, click <link>`,
      },
      {
        question: 'Can I get a receipt for sending my International Remittance transactions?',
        answer:
          'Yes, you can receive your notifications for all your transactions via SMS, email or even at the confirmation page which you can share with the recipient.',
      },
      {
        question: 'How can I request for reversal of a Money Transfer?',
        answer:
          "Once you have confirmed the transfer, you won't be able to reverse it as stated in our terms and conditions, unless if the money has been returned by the receiving bank or agent, and a refund is issued.",
      },
    ],
  },
  {
    title: 'ACCOUNT SERVICES AND SUPPORT',
    questions: [
      {
        question: 'How do I change my passcode?',
        answer: `To change your passcode, go to your profile settings and click Reset Passcode. To view a quick tutorial on how to change your passcode, click <link>`,
      },
      {
        question: 'How do I reset my passcode?',
        answer: `Click on the settings icon on the card to change your pin settings

Passcode is your password for logging into your account using the mobile application`,
      },
      {
        question: 'How can I view my transactions?',
        answer: `Click on the view transactions in the home page, you will be receiving in monthly bases statement through your register email & download through your mobile app PDF. Follow the link below for the demo. <link>`,
      },
      {
        question: 'Is Jingle Pay Secure?',
        answer:
          'Jingle Pay has implemented modern state of the art bank grade cyber security with encryption standards & protocols. We secure your data and money safeguarded locally in the UAE.',
      },
      {
        question:
          'Biometric verification is not working on my Smartphone, so I am unable to log into my Jingle Pay account. What can I do?',
        answer: 'You can always use your passcode to login if your biometric (Face ID/ Touch ID) is not working.',
      },
      {
        question: 'What should I do if my device is stolen or lost?',
        answer: `In case of lost device, login to a new device using your registered mobile number. If you don't have access to a new device reach out to <a class="cursor-pointer hover:text-[#794EFF]" href="mailto:support@jinglepay.com">support@jinglepay.com</a> for assistance.`,
      },
      {
        question: 'How can I get in touch with Jingle Pay?',
        answer: `You can reach out to us using in-app chat support or by emailing us at <a class="cursor-pointer hover:text-[#794EFF]" href="mailto:support@jinglepay.com">support@jinglepay.com</a>`,
      },
      {
        question: 'What can I do if I want to send feedback or a complaint to Jingle Pay?',
        answer: `We value your feedback and improve wherever possible. You can reach out to us using in-app chat support or by emailing us at <a class="cursor-pointer hover:text-[#794EFF]" href="mailto:support@jinglepay.com">support@jinglepay.com</a><br><br>Please send an email to <a class="cursor-pointer hover:text-[#794EFF]" href="mailto:complaints@jinglepay.com">complaints@jinglepay.com</a> if you would like to submit a complaint.`,
      },
    ],
  },
];

// Flatten all questions for easier mapping
const allQuestions = faqSections.flatMap((section) => section.questions.map((q) => ({ ...q, section: section.title })));
---

<section
  class='flex flex-col pt-[104px] pb-[80px] px-4 lg:px-[88px] lg:pt-[189px] lg:pb-[161px] gap-y-12 lg:gap-y-[65px]'
  style='direction: ltr;'
  aria-labelledby='faq-heading'
>
  <div class='flex flex-row items-center gap-x-4'>
    <button onclick='history.back(); return false;' role='button' style='cursor: pointer;'>
      <div class='w-8 h-8 p-1.5 flex items-center justify-center border rounded-full border-[#794EFF]'>
        <Arrow class='rotate-180' />
      </div>
    </button>
    <span class='text-3xl font-extrabold lg:text-4xl'>Frequently Asked Questions</span>
  </div>

  {
    faqSections.map((section, sectionIndex) => (
      <div class='flex flex-col gap-y-6'>
        <h2 class='text-2xl font-bold text-gray-800'>{section.title}</h2>
        <div class='border-t border-gray-200'>
          {section.questions.map((item, index) => {
            const globalIndex = sectionIndex * 100 + index; // Ensure unique IDs
            return (
              <div class='border-b border-gray-200 faq-item'>
                <button
                  class='flex items-center justify-between w-full px-2 py-5 text-base font-bold text-left text-gray-800 faq-question focus:outline-none focus-visible:ring focus-visible:ring-indigo-300 focus-visible:ring-opacity-75 group'
                  aria-expanded='false'
                  aria-controls={`faq-answer-${globalIndex}`}
                  id={`faq-question-${globalIndex}`}
                >
                  <span class='flex-1 pr-4'>{item.question}</span>
                  <span class='text-gray-500 transition-transform duration-200 ease-in-out faq-icon-wrapper'>
                    <svg class='w-5 h-5' fill='currentColor' viewBox='0 0 16 16' xmlns='http://www.w3.org/2000/svg'>
                      <path
                        fill-rule='evenodd'
                        d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'
                      />
                    </svg>
                  </span>
                </button>
                <div
                  class='faq-answer overflow-hidden max-h-0 transition-[max-height,padding] duration-400 ease-in-out px-2'
                  role='region'
                  aria-labelledby={`faq-question-${globalIndex}`}
                  id={`faq-answer-${globalIndex}`}
                >
                  <div class='pt-1 pb-5'>
                    <div class='text-base leading-relaxed text-gray-600' set:html={item.answer} />
                  </div>
                </div>
              </div>
            );
          })}
        </div>
      </div>
    ))
  }
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const faqItems = document.querySelectorAll('.faq-item');

    faqItems.forEach((item) => {
      const questionButton = item.querySelector('.faq-question');
      const answerPanel: HTMLElement | null = item.querySelector('.faq-answer');
      const iconWrapper = item.querySelector('.faq-icon-wrapper');

      if (!questionButton || !answerPanel || !iconWrapper) return;

      questionButton.addEventListener('click', () => {
        const isExpanded = questionButton.getAttribute('aria-expanded') === 'true';

        // Toggle the current item
        questionButton.setAttribute('aria-expanded', String(!isExpanded));

        if (isExpanded) {
          // Closing: Set max-height to 0
          answerPanel.style.maxHeight = '0px';
          iconWrapper.classList.remove('rotate-180', 'text-indigo-600');
          iconWrapper.classList.add('text-gray-500');
        } else {
          // Opening: Set max-height to scrollHeight for dynamic content height
          answerPanel.style.maxHeight = answerPanel.scrollHeight + 'px';
          iconWrapper.classList.add('rotate-180', 'text-indigo-600');
          iconWrapper.classList.remove('text-gray-500');
        }
      });

      // Optional: Recalculate max-height on resize for open accordions
      window.addEventListener('resize', () => {
        if (questionButton.getAttribute('aria-expanded') === 'true') {
          const transition = answerPanel.style.transition;
          answerPanel.style.transition = 'none';
          answerPanel.style.maxHeight = answerPanel.scrollHeight + 'px';
          answerPanel.offsetHeight;
          answerPanel.style.transition = transition;
        }
      });
    });
  });
</script>
